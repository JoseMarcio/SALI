<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html lang="pt-br"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <!--INÍCIO DO BLOCO DE INSTRUÇÕES DA PÁGINA-->
    <h:head>

        <meta charset="UTF-8"/>
        <!-- TÍTULO DA PÁGINA-->
        <title>Gerenciar Professor</title>
        <!-- LINK PARA O CSS - USANDO TAGS JSF-->
        <h:outputStylesheet library="css" name="estiloManterProfessor.css"/>
        <!-- LINK PARA A IMAGEM NA ABA DO NAVEGADOR -->
        <link rel="shortcut icon" href="resources/imagens/sali_ico.png"/>

    </h:head>

    <!--INÍCIO DO CORPO -->
    <h:body id="body_color">

        <!--LAYOUT Principal - todos outros componentes deSTE-->
        <p:layout id="layoutPrincipal" class="layoutPrincipal" fullPage="true">

            <!--LAYOUT SECUNDÁRIO-->
            <p:layoutUnit position="center" class="layoutPrincipal">

                <!--CABEÇALHO DA PÁGINA-->
                <header id="corFontCabecalho" class="cabecalho">
                    <h2>SALI - Sistema de Aprendizado da Lígua Inglesa</h2>
                    <p>Fazer cabeçalho!!</p>
                    <p:graphicImage library="imagens" name="logo_sali.png" id="logo" class="logo"/>
                </header>
                <!--FIM CABEÇALHO DA PÁGINA-->


                <!--BARRA DE MENU - LOGO APÓS O CABEÇALHO-->
                <h:form>  
                    <p:menubar >
                        <f:facet name="options" >
                            <!-- CHAMA PÁGINA DE INÍCIO DE INSTITUIÇÃO-->
                            <p:commandButton action="autenticacao" value="Início" />
                            <!-- FECHA A SESSÃO -->
                            <p:commandButton  action="autenticacao" value="Sair"/>
                        </f:facet>
                    </p:menubar>
                </h:form>
                <!--FIM BARRA DE MENU-->

                <!--SESSÃO DE MANTER PROFESSOR-->
                <section class="sessaoManterProfessor">

                    <h1>Gerenciar Professores</h1>

                    <!--FORMULÁRIO DE CADASTRO DE PROFESSOR.-->
                    <h:form id="formRrofessor">
                        <!-- mensagens de validação -->
                        <p:messages autoUpdate="true" for="formProfessor"/>



                        <!--CAMPOS REQUERIDOS-->
                        <h:panelGrid columns="1">

                            <p:outputLabel value="Nome Completo:" id="labelNome" for="inputNome"/>
                            <p:inputText value="#{professorBean.nome}" id="inputNome" required="true" requiredMessage="Informe um nome."/>

                            <p:outputLabel value="Matrícula Escolar:" id="labelMatriculaEscolar" for="inputMatriculaEscolar"/>
                            <p:inputText value="#{professorBean.matricula}"  id="inputMatriculaEscolar" required="true" requiredMessage="Informe uma matrícula." validatorMessage="Insira uma matrícula válida." validator="validaMatProf">
                                <f:validateRegex pattern="^[0-9]+$" />
                            </p:inputText>

                            <p:outputLabel value="E-Mail:" id="labelEmail" for="inputEmail" />
                            <p:inputText value="#{professorBean.email}"  id="inputEmail" required="true" requiredMessage="Informe um e-mail." validator="validaEmailProfessor" validatorMessage="Informe um e-mail válido.">
                                <f:validateRegex pattern="[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*(.[a-z]{2,3})" />
                            </p:inputText>

                            <h:panelGrid columns="2">
                                <p:outputLabel value="Senha:" id="labelSenha" for="senha"/>
                                <p:outputLabel value="Confirmar Senha:" id="labelConfirmarSenha" for="confirmaSenha"/>

                                <p:password value="#{professorBean.senha}" id="senha"  match="confirmaSenha" required="true" validatorMessage="As senhas informadas não coincidem."
                                            requiredMessage="Informe uma senha."/>

                                <p:password value="#{professorBean.comfirmarSenha}" id="confirmaSenha"  required="true" requiredMessage="Confirme a senha digitada."/>
                            </h:panelGrid>

                            <!-- BOTÕES -->
                            <h:panelGrid  columns="3">
                                <p:commandButton  action="#{professorBean.registrar()}" id="registrar" value="Registrar">
                                    <p:ajax update="registrar"/>
                                </p:commandButton>
                                <p:commandButton value="Alterar / Excluir" type="reset" onclick="PF('tabelaPesquisaProfessor').show();" immediate="true"/>
                                <p:commandButton value="Limpar" type="reset"/>
                            </h:panelGrid>

                        </h:panelGrid>

                    </h:form>
                    <!-- FIM DADOS DE REGISTRO. -->
                </section>
                <!--FIM SESSÃO MANTER PROFESSOR-->







                <p:dialog header="Pesquisa de Professor" widgetVar="tabelaPesquisaProfessor" minHeight="40"  width="900" height="470" appendTo="@(body)" modal="true" resizable="false" draggable="false">
                    <h:form id="formPesquisa">
                        <p:messages autoUpdate="true" for="formPesquisa"/>

                        <div style="margin-top: 5px; margin-bottom: 20px">
                            <p:inputText id="nome" size="40" value="#{professorBean.valorDePesquisa}" placeholder="Matrícula ou Nome" required="true" requiredMessage="Iforme umdado para pesquisar."/>

                            <p:spacer width="10px"/>

                            <p:commandButton value="Pesquisar" action="#{professorBean.pesquisar()}" />
                            <p:commandButton value="Limpar" type="reset" />
                            <p:commandButton value="Cancelar" type="reset" onclick="PF('tabelaPesquisaProfessor').hide()" />
                        </div>

                        <p:dataTable value="#{professorBean.professoresFiltrados}" var="professor"
                                     emptyMessage="Nenhum professor encontrado." rows="5"
                                     paginator="true" paginatorAlwaysVisible="false" paginatorPosition="bottom" style="font-size: 15px;">

                            <p:column headerText="Matrícula" style="text-align: center; width: 10%">
                                <h:outputText value="#{professor.matricula}" />
                            </p:column>

                            <p:column headerText="Nome" style="width: 30%;">
                                <h:outputText value="#{professor.nomeCompleto}" />
                            </p:column>

                            <p:column headerText="E-mail" style="width: 30%;">
                                <h:outputText value="#{professor.email}" />
                            </p:column>

                            <p:column width="13%" style="text-align:center">
                                <p:commandButton value="Atualizar" icon="ui-icon-check" title="Atualizar"
                                                 type="button" onclick="PF('novosDados').show();"/>
                            </p:column>

                            <p:column width="10%" style="text-align:center">
                                <h:form>           
                                    <p:messages autoUpdate="true"/>

                                    <p:commandButton value="Excluir" action="#{professorBean.excluir(professor)}">
                                        <p:confirm header="Antenção!!" message="Excluir?" icon="ui-icon-alert" />
                                    </p:commandButton>

                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                        <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                                    </p:confirmDialog>
                                </h:form>
                            </p:column>

                        </p:dataTable>

                    </h:form>
                </p:dialog>
                <!-- FIM PESQUISAR PROFESSOR-->










                <p:dialog header="Atualizar Dados" widgetVar="novosDados" minHeight="40" width="900" height="300" appendTo="@(body)" modal="true" resizable="false" draggable="false">
                    <h:form>

                        <p:messages autoUpdate="true"/>

                        <!--CAMPOS REQUERIDOS-->
                        <h:panelGrid columns="1" >

                            <h:form id="formRrofessor">
                                <!-- mensagens de validação -->
                                <p:messages autoUpdate="true" for="formProfessor"/>



                                <!--CAMPOS REQUERIDOS-->
                                <h:panelGrid columns="1">

                                    <p:outputLabel value="Nome Completo:" id="labelNome" for="inputNome"/>
                                    <p:inputText value="#{professorBean.nome}" id="inputNome" required="true" requiredMessage="Informe um nome."/>

                                    <p:outputLabel value="Matrícula Escolar:" id="labelMatriculaEscolar" for="inputMatriculaEscolar"/>
                                    <p:inputText value="#{professorBean.matricula}"  id="inputMatriculaEscolar" required="true" requiredMessage="Informe uma matrícula." validatorMessage="Insira uma matrícula válida." validator="validaMatProf">
                                        <f:validateRegex pattern="^[0-9]+$" />
                                    </p:inputText>

                                    <p:outputLabel value="E-Mail:" id="labelEmail" for="inputEmail" />
                                    <p:inputText value="#{professorBean.email}"  id="inputEmail" required="true" requiredMessage="Informe um e-mail." validator="validaEmailProfessor" validatorMessage="Informe um e-mail válido.">
                                        <f:validateRegex pattern="[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*(.[a-z]{2,3})" />
                                    </p:inputText>

                                    <h:panelGrid columns="2">
                                        <p:outputLabel value="Senha:" id="labelSenha" for="senha"/>
                                        <p:outputLabel value="Confirmar Senha:" id="labelConfirmarSenha" for="confirmaSenha"/>

                                        <p:password value="#{professorBean.senha}" id="senha"  match="confirmaSenha" required="true" validatorMessage="As senhas informadas não coincidem."
                                                    requiredMessage="Informe uma senha."/>

                                        <p:password value="#{professorBean.comfirmarSenha}" id="confirmaSenha"  required="true" requiredMessage="Confirme a senha digitada."/>
                                    </h:panelGrid>

                                    <!-- BOTÕES -->
                                    <h:panelGrid  columns="3">
                                        <p:commandButton  action="#{professorBean.atualizar()}" id="salvar" value="Salvar">
                                            <p:ajax update="registrar"/>
                                        </p:commandButton>
                                    </h:panelGrid>

                                </h:panelGrid>

                            </h:form>

                        </h:panelGrid>

                    </h:form>
                </p:dialog>




                <!--RODAPE-->
                <footer id="rodape" class="rodape">
                    <h3>SALI - Sistema de Aprendizado da Língua Inglesa</h3>
                </footer>
                <!-- FIM DO RODAPÉ -->




                <!--FIM DO LAYOUT SECUNDÁRIO-->
            </p:layoutUnit>

            <!--FIM DO LAYOUT PRINCIPAL-->
        </p:layout>
        <!-- FIM DO CORPO -->  
    </h:body>
</html>

